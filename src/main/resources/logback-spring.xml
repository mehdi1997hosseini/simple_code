<?xml version="1.0" encoding="UTF-8"?>
<configuration>

    <!-- ðŸ“¦ ØªØ¹Ø±ÛŒÙ Ø§Ù„Ú¯ÙˆÛŒ Ú©Ù„ÛŒ Ù„Ø§Ú¯ -->
    <!-- ðŸ§© Ø®ÙˆØ§Ù†Ø¯Ù† Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Spring Boot -->
    <!-- Ø§Ø² application.yml ÛŒØ§ application.properties -->
    <property name="LOG_PATTERN" value="%d{HH:mm:ss} | LEVEL: %-5level | CLASS: %logger{36} | %msg%n"/>
    <springProperty scope="context" name="LOG_PATH" source="logging.file.path" defaultValue="./logs"/>
    <springProperty scope="context" name="APP_NAME" source="spring.application.name" defaultValue="my-app"/>

    <!-- ðŸ–¥ Ú©Ù†Ø³ÙˆÙ„ (Ù…Ø´ØªØ±Ú© Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ù‡ Ù¾Ø±ÙˆÙØ§ÛŒÙ„â€ŒÙ‡Ø§) -->
    <appender name="Console" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>${LOG_PATTERN}</pattern>
        </encoder>
    </appender>

    <!-- Ú©Ù†Ø³ÙˆÙ„ Ù„Ø§Ú¯Ø± -->
    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>${LOG_PATTERN}</pattern>
        </encoder>
    </appender>

    <!-- ÙØ§ÛŒÙ„ Ù„Ø§Ú¯Ø± -->
    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${LOG_FILE_PATH}</file>
        <!-- Ù¾Ø§Ù„ÛŒØ³ÛŒ Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ + Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø³Ø§ÛŒØ² -->
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <!-- Ù†Ø§Ù… ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¢Ø±Ø´ÛŒÙˆÛŒ Ø¨Ø§ ØªØ§Ø±ÛŒØ® Ùˆ Ø´Ù…Ø§Ø±Ù‡ -->
            <fileNamePattern>${LOG_PATH}/${LOG_FILE_NAME}.%d{yyyy-MM-dd}.%i.log.gz</fileNamePattern>

            <!-- Ø´Ø±Ø· Ø±ÙˆÙ„ÛŒÙ†Ú¯: Ù‡Ù… ØªØ§Ø±ÛŒØ® Ùˆ Ù‡Ù… Ø³Ø§ÛŒØ² -->
            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>300MB</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>

            <!-- Ø­Ø¯Ø§Ú©Ø«Ø± Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§: 20 Ø±ÙˆØ² -->
            <maxHistory>20</maxHistory>
            <!-- Ø­Ø¯Ø§Ú©Ø«Ø± ØªØ¹Ø¯Ø§Ø¯ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø±ÙˆÙ„â€ŒØ´Ø¯Ù‡: 10 -->
            <totalSizeCap>3GB</totalSizeCap>
        </rollingPolicy>

        <encoder>
            <pattern>${LOG_PATTERN}</pattern>
        </encoder>
    </appender>

    <springProfile name="mysql">
        <!-- ðŸ§© Ø®ÙˆØ§Ù†Ø¯Ù† Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Spring Boot -->
        <springProperty scope="context" name="PROFILE_NAME" defaultValue="mysql"/>
        <root level="info">
            <appender-ref ref="CONSOLE"/>
            <appender-ref ref="FILE"/>
        </root>
    </springProfile>


</configuration>